---name: gsd:new-milestonedescription: Start a new milestone cycle — update PROJECT.md and route to requirementsargument-hint: "[milestone name, e.g., 'v1.1 Notifications']"allowed-tools:  - Read  - Write  - Bash  - Task  - AskUserQuestion---<objective>Start a new milestone through unified flow: questioning → research (optional) → requirements → roadmap.This is the brownfield equivalent of new-project. The project exists, PROJECT.md has history. This command gathers "what's next", updates PROJECT.md, then continues through the full requirements → roadmap cycle.**Creates/Updates:**- `.planning/PROJECT.md` — updated with new milestone goals- `.planning/research/` — domain research (optional, focuses on NEW features)- `.planning/REQUIREMENTS.md` — scoped requirements for this milestone- `.planning/ROADMAP.md` — phase structure (continues numbering)- `.planning/STATE.md` — reset for new milestone**After this command:** Run `/gsd:plan-phase [N]` to start execution.</objective><execution_context>@./.claude/get-shit-done/references/questioning.md@./.claude/get-shit-done/references/ui-brand.md@./.claude/get-shit-done/templates/project.md@./.claude/get-shit-done/templates/requirements.md</execution_context><context>Milestone name: $ARGUMENTS (optional - will prompt if not provided)**Load project context:**@.planning/PROJECT.md@.planning/STATE.md@.planning/MILESTONES.md@.planning/config.json**Load milestone context (if exists, from /gsd:discuss-milestone):**@.planning/MILESTONE-CONTEXT.md</context><process>## Phase 1: Load Context- Read PROJECT.md (existing project, Validated requirements, decisions)- Read MILESTONES.md (what shipped previously)- Read STATE.md (pending todos, blockers)- Check for MILESTONE-CONTEXT.md (from /gsd:discuss-milestone)## Phase 2: Gather Milestone Goals**If MILESTONE-CONTEXT.md exists:**- Use features and scope from discuss-milestone- Present summary for confirmation**If no context file:**- Present what shipped in last milestone- Ask: "What do you want to build next?"- Use AskUserQuestion to explore features- Probe for priorities, constraints, scope## Phase 3: Determine Milestone Version- Parse last version from MILESTONES.md- Suggest next version (v1.0 → v1.1, or v2.0 for major)- Confirm with user## Phase 4: Update PROJECT.mdAdd/update these sections:```markdown## Current Milestone: v[X.Y] [Name]**Goal:** [One sentence describing milestone focus]**Target features:**- [Feature 1]- [Feature 2]- [Feature 3]```sql```markdown## Current PositionPhase: Not started (defining requirements)Plan: —Status: Defining requirementsLast activity: [today] — Milestone v[X.Y] started```sql```bashCOMMIT_PLANNING_DOCS=$(cat .planning/config.json 2>/dev/null | grep -o '"commit_docs"[[:space:]]*:[[:space:]]*[^,}]*' | grep -o 'true\|false' || echo "true")git check-ignore -q .planning 2>/dev/null && COMMIT_PLANNING_DOCS=false```text```bashgit add .planning/PROJECT.md .planning/STATE.mdgit commit -m "docs: start milestone v[X.Y] [Name]"```css```bashMODEL_PROFILE=$(cat .planning/config.json 2>/dev/null | grep -o '"model_profile"[[:space:]]*:[[:space:]]*"[^"]*"' | grep -o '"[^"]*"$' | tr -d '"' || echo "balanced")```text```text
```sql```bashmkdir -p .planning/research```css```text
```text```csv
```text```csv
```css```bash
```css```text
```markdown```bash
```markdown```bash
```text```bashgit add .planning/REQUIREMENTS.mdgit commit -m "$(cat <<'EOF'docs: define milestone v[X.Y] requirements[X] requirements across [N] categoriesEOF)"```css```text
```csv```csv
```markdown```bash
```markdown```bashgit add .planning/ROADMAP.md .planning/STATE.md .planning/REQUIREMENTS.mdgit commit -m "$(cat <<'EOF'docs: create milestone v[X.Y] roadmap ([N] phases)Phases:[N]. [phase-name]: [requirements covered][N+1]. [phase-name]: [requirements covered]...All milestone requirements mapped to phases.EOF)"```css```bash
```</process><success_criteria>- [ ] PROJECT.md updated with Current Milestone section- [ ] STATE.md reset for new milestone- [ ] MILESTONE-CONTEXT.md consumed and deleted (if existed)- [ ] Research completed (if selected) — 4 parallel agents spawned, milestone-aware- [ ] Requirements gathered (from research or conversation)- [ ] User scoped each category- [ ] REQUIREMENTS.md created with REQ-IDs- [ ] gsd-roadmapper spawned with phase numbering context- [ ] Roadmap files written immediately (not draft)- [ ] User feedback incorporated (if any)- [ ] ROADMAP.md created with phases continuing from previous milestone- [ ] All commits made (if planning docs committed)- [ ] User knows next step is `/gsd:discuss-phase [N]`**Atomic commits:** Each phase commits its artifacts immediately. If context is lost, artifacts persist.</success_criteria>