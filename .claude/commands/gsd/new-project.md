---name: gsd:new-projectdescription: Initialize a new project with deep context gathering and PROJECT.mdallowed-tools:  - Read  - Bash  - Write  - Task  - AskUserQuestion---<objective>Initialize a new project through unified flow: questioning → research (optional) → requirements → roadmap.This is the most leveraged moment in any project. Deep questioning here means better plans, better execution, better outcomes. One command takes you from idea to ready-for-planning.**Creates:**- `.planning/PROJECT.md` — project context- `.planning/config.json` — workflow preferences- `.planning/research/` — domain research (optional)- `.planning/REQUIREMENTS.md` — scoped requirements- `.planning/ROADMAP.md` — phase structure- `.planning/STATE.md` — project memory**After this command:** Run `/gsd:plan-phase 1` to start execution.</objective><execution_context>@./.claude/get-shit-done/references/questioning.md@./.claude/get-shit-done/references/ui-brand.md@./.claude/get-shit-done/templates/project.md@./.claude/get-shit-done/templates/requirements.md</execution_context><process>## Phase 1: Setup**MANDATORY FIRST STEP — Execute these checks before ANY user interaction:**1. **Abort if project exists:**   ```bash   [ -f .planning/PROJECT.md ] && echo "ERROR: Project already initialized. Use /gsd:progress" && exit 1   ```2. **Initialize git repo in THIS directory** (required even if inside a parent repo):   ```bash   if [ -d .git ] || [ -f .git ]; then       echo "Git repo exists in current directory"   else       git init       echo "Initialized new git repo"   fi   ```3. **Detect existing code (brownfield detection):**   ```bash   CODE_FILES=$(find . -name "*.ts" -o -name "*.js" -o -name "*.py" -o -name "*.go" -o -name "*.rs" -o -name "*.swift" -o -name "*.java" 2>/dev/null | grep -v node_modules | grep -v .git | head -20)   HAS_PACKAGE=$([ -f package.json ] || [ -f requirements.txt ] || [ -f Cargo.toml ] || [ -f go.mod ] || [ -f Package.swift ] && echo "yes")   HAS_CODEBASE_MAP=$([ -d .planning/codebase ] && echo "yes")   ```   **You MUST run all bash commands above using the Bash tool before proceeding.**## Phase 2: Brownfield Offer**If existing code detected and .planning/codebase/ doesn't exist:**Check the results from setup step:- If `CODE_FILES` is non-empty OR `HAS_PACKAGE` is "yes"- AND `HAS_CODEBASE_MAP` is NOT "yes"Use AskUserQuestion:- header: "Existing Code"- question: "I detected existing code in this directory. Would you like to map the codebase first?"- options:  - "Map codebase first" — Run /gsd:map-codebase to understand existing architecture (Recommended)  - "Skip mapping" — Proceed with project initialization**If "Map codebase first":**```text```bash
```text```csv
```markdown## Requirements### Validated(None yet — ship to validate)### Active- [ ] [Requirement 1]- [ ] [Requirement 2]- [ ] [Requirement 3]### Out of Scope- [Exclusion 1] — [why]- [Exclusion 2] — [why]```text```markdown## Requirements### Validated- ✓ [Existing capability 1] — existing- ✓ [Existing capability 2] — existing- ✓ [Existing capability 3] — existing### Active- [ ] [New requirement 1]- [ ] [New requirement 2]### Out of Scope- [Exclusion 1] — [why]```text```markdown## Key Decisions| Decision | Rationale | Outcome ||----------|-----------|---------|| [Choice from questioning] | [Why] | — Pending |```text```markdown---*Last updated: [date] after initialization*```text```bashmkdir -p .planninggit add .planning/PROJECT.mdgit commit -m "$(cat <<'EOF'docs: initialize project[One-liner from PROJECT.md What This Is section]EOF)"```css```csv
```csv```csv
```sql```json{  "mode": "yolo|interactive",  "depth": "quick|standard|comprehensive",  "parallelization": true|false,  "commit_docs": true|false,  "model_profile": "quality|balanced|budget",  "workflow": {    "research": true|false,    "plan_check": true|false,    "verifier": true|false  }}```markdown```bashgit add .planning/config.jsongit commit -m "$(cat <<'EOF'chore: add project configMode: [chosen mode]Depth: [chosen depth]Parallelization: [enabled/disabled]Workflow agents: research=[on/off], plan_check=[on/off], verifier=[on/off]EOF)"```css```bashMODEL_PROFILE=$(cat .planning/config.json 2>/dev/null | grep -o '"model_profile"[[:space:]]*:[[:space:]]*"[^"]*"' | grep -o '"[^"]*"$' | tr -d '"' || echo "balanced")```text```text
```sql```bashmkdir -p .planning/research```css```text
```text```csv
```text```csv
```css```bash
```css```text
```csv```bash
```markdown```bash
```text```bashgit add .planning/REQUIREMENTS.mdgit commit -m "$(cat <<'EOF'docs: define v1 requirements[X] requirements across [N] categories[Y] requirements deferred to v2EOF)"```css```text
```text```csv
```markdown```bash
```markdown```bashgit add .planning/ROADMAP.md .planning/STATE.md .planning/REQUIREMENTS.mdgit commit -m "$(cat <<'EOF'docs: create roadmap ([N] phases)Phases:1. [phase-name]: [requirements covered]2. [phase-name]: [requirements covered]...All v1 requirements mapped to phases.EOF)"```css```bash
```</process><output>- `.planning/PROJECT.md`- `.planning/config.json`- `.planning/research/` (if research selected)  - `STACK.md`  - `FEATURES.md`  - `ARCHITECTURE.md`  - `PITFALLS.md`  - `SUMMARY.md`- `.planning/REQUIREMENTS.md`- `.planning/ROADMAP.md`- `.planning/STATE.md`</output><success_criteria>- [ ] .planning/ directory created- [ ] Git repo initialized- [ ] Brownfield detection completed- [ ] Deep questioning completed (threads followed, not rushed)- [ ] PROJECT.md captures full context → **committed**- [ ] config.json has workflow mode, depth, parallelization → **committed**- [ ] Research completed (if selected) — 4 parallel agents spawned → **committed**- [ ] Requirements gathered (from research or conversation)- [ ] User scoped each category (v1/v2/out of scope)- [ ] REQUIREMENTS.md created with REQ-IDs → **committed**- [ ] gsd-roadmapper spawned with context- [ ] Roadmap files written immediately (not draft)- [ ] User feedback incorporated (if any)- [ ] ROADMAP.md created with phases, requirement mappings, success criteria- [ ] STATE.md initialized- [ ] REQUIREMENTS.md traceability updated- [ ] User knows next step is `/gsd:discuss-phase 1`**Atomic commits:** Each phase commits its artifacts immediately. If context is lost, artifacts persist.</success_criteria>