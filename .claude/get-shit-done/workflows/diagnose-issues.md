<purpose>Orchestrate parallel debug agents to investigate UAT gaps and find root causes.After UAT finds gaps, spawn one debug agent per gap. Each agent investigates autonomously with symptoms pre-filled from UAT. Collect root causes, update UAT.md gaps with diagnosis, then hand off to plan-phase --gaps with actual diagnoses.Orchestrator stays lean: parse gaps, spawn agents, collect results, update UAT.</purpose><paths>DEBUG_DIR=.planning/debugDebug files use the `.planning/debug/` path (hidden directory with leading dot).</paths><core_principle>**Diagnose before planning fixes.**UAT tells us WHAT is broken (symptoms). Debug agents find WHY (root cause). plan-phase --gaps then creates targeted fixes based on actual causes, not guesses.Without diagnosis: "Comment doesn't refresh" → guess at fix → maybe wrongWith diagnosis: "Comment doesn't refresh" → "useEffect missing dependency" → precise fix</core_principle><process><step name="parse_gaps">**Extract gaps from UAT.md:**Read the "Gaps" section (YAML format):```yaml- truth: "Comment appears immediately after submission"  status: failed  reason: "User reported: works but doesn't show until I refresh the page"  severity: major  test: 2  artifacts: []  missing: []```text```csv
```html```csv
```html```csv
```markdown```bash
```markdown```yaml- truth: "Comment appears immediately after submission"  status: failed  reason: "User reported: works but doesn't show until I refresh the page"  severity: major  test: 2  root_cause: "useEffect in CommentList.tsx missing commentCount dependency"  artifacts:    - path: "src/components/CommentList.tsx"      issue: "useEffect missing dependency"  missing:    - "Add commentCount to useEffect dependency array"    - "Trigger re-render when new comment added"  debug_session: .planning/debug/comment-not-refreshing.md```sql```bashCOMMIT_PLANNING_DOCS=$(cat .planning/config.json 2>/dev/null | grep -o '"commit_docs"[[:space:]]*:[[:space:]]*[^,}]*' | grep -o 'true\|false' || echo "true")git check-ignore -q .planning 2>/dev/null && COMMIT_PLANNING_DOCS=false```text```bashgit add ".planning/phases/XX-name/{phase}-UAT.md"git commit -m "docs({phase}): add root causes from diagnosis"```html```text
```Return to verify-work orchestrator for automatic planning.Do NOT offer manual next steps - verify-work handles the rest.</step></process><context_efficiency>Agents start with symptoms pre-filled from UAT (no symptom gathering).Agents only diagnose—plan-phase --gaps handles fixes (no fix application).</context_efficiency><failure_handling>**Agent fails to find root cause:**- Mark gap as "needs manual review"- Continue with other gaps- Report incomplete diagnosis**Agent times out:**- Check DEBUG-{slug}.md for partial progress- Can resume with /gsd:debug**All agents fail:**- Something systemic (permissions, git, etc.)- Report for manual investigation- Fall back to plan-phase --gaps without root causes (less precise)</failure_handling><success_criteria>- [ ] Gaps parsed from UAT.md- [ ] Debug agents spawned in parallel- [ ] Root causes collected from all agents- [ ] UAT.md gaps updated with artifacts and missing- [ ] Debug sessions saved to ${DEBUG_DIR}/- [ ] Hand off to verify-work for automatic planning</success_criteria>