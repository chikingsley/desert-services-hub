<purpose>Orchestrate parallel codebase mapper agents to analyze codebase and produce structured documents in .planning/codebase/Each agent has fresh context, explores a specific focus area, and **writes documents directly**. The orchestrator only receives confirmation + line counts, then writes a summary.Output: .planning/codebase/ folder with 7 structured documents about the codebase state.</purpose><philosophy>**Why dedicated mapper agents:**- Fresh context per domain (no token contamination)- Agents write documents directly (no context transfer back to orchestrator)- Orchestrator only summarizes what was created (minimal context usage)- Faster execution (agents run simultaneously)**Document quality over length:**Include enough detail to be useful as reference. Prioritize practical examples (especially code patterns) over arbitrary brevity.**Always include file paths:**Documents are reference material for Claude when planning/executing. Always include actual file paths formatted with backticks: `src/services/user.ts`.</philosophy><process><step name="resolve_model_profile" priority="first">Read model profile for agent spawning:```bashMODEL_PROFILE=$(cat .planning/config.json 2>/dev/null | grep -o '"model_profile"[[:space:]]*:[[:space:]]*"[^"]*"' | grep -o '"[^"]*"$' | tr -d '"' || echo "balanced")```text```bashls -la .planning/codebase/ 2>/dev/null```text```text
```csv```bashmkdir -p .planning/codebase```markdown```text
```yaml```csv
```text```text
```yaml```csv
```text```text
```yaml```csv
```text```text
```yaml```csv
```html```bash
```html```bashls -la .planning/codebase/wc -l .planning/codebase/*.md```markdown```bashCOMMIT_PLANNING_DOCS=$(cat .planning/config.json 2>/dev/null | grep -o '"commit_docs"[[:space:]]*:[[:space:]]*[^,}]*' | grep -o 'true\|false' || echo "true")git check-ignore -q .planning 2>/dev/null && COMMIT_PLANNING_DOCS=false```text```bashgit add .planning/codebase/*.mdgit commit -m "$(cat <<'EOF'docs: map existing codebase- STACK.md - Technologies and dependencies- ARCHITECTURE.md - System design and patterns- STRUCTURE.md - Directory layout- CONVENTIONS.md - Code style and patterns- TESTING.md - Test structure- INTEGRATIONS.md - External services- CONCERNS.md - Technical debt and issuesEOF)"```html```bashwc -l .planning/codebase/*.md```text```bash
```End workflow.</step></process><success_criteria>- .planning/codebase/ directory created- 4 parallel gsd-codebase-mapper agents spawned with run_in_background=true- Agents write documents directly (orchestrator doesn't receive document contents)- Read agent output files to collect confirmations- All 7 codebase documents exist- Clear completion summary with line counts- User offered clear next steps in GSD style</success_criteria>