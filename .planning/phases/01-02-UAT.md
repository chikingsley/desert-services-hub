---
status: complete
phase: 01-02-combined
source: [01-01-SUMMARY.md, 02-01-SUMMARY.md]
started: 2026-01-23T14:00:00Z
updated: 2026-01-23T14:45:00Z
---

## Current Test
<!-- OVERWRITE each test - shows where we are -->

[testing complete]

## Tests

### 1. Pipeline Starts

expected: Run `bun run services/contract/pipeline/index.ts` and see startup messages. Pipeline stays running.
result: pass

### 2. PDF Detection

expected: With pipeline running, drop a PDF file into the watch folder. See "[Pipeline] Extracted X pages via digital/ocr in Yms: /path/to/file.pdf"
result: pass
note: TrueType font warnings from pdfjs-dist are cosmetic - extraction completed successfully (168 pages, 2010 chars/page)

### 3. Non-PDF Ignored

expected: Drop a non-PDF file (e.g., .txt or .doc) into the watch folder. No log output - file is silently ignored.
result: pass

### 4. Duplicate Prevention

expected: Drop the same PDF filename again. No processing - file was already processed.
result: pass

### 5. Text Storage

expected: After processing a PDF, run: `bun -e "import { getFullText } from './services/contract/extraction/storage'; console.log((await getFullText(1)).substring(0, 200))"` and see extracted text content.
result: pass
note: Contract IDs non-sequential (6, 8) due to SQLite auto-increment from previous tests - storage works correctly (341k chars from 168 pages)

### 6. Clean Shutdown

expected: Press Ctrl+C on running pipeline. See "[Pipeline] Shutting down..." and process exits cleanly.
result: pass

## Summary

total: 6
passed: 6
issues: 0
pending: 0
skipped: 0

## Gaps

[none yet]
