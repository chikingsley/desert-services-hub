flowchart TB
    subgraph PJ["<b>PORTABLE TOILET (PJ) PROCESS</b>"]
        direction TB

        %% INTAKE SOURCES
        Start1(["â”â”â”â”â”â”â”â”â”â”<br/><b>Work Intake Source 1:</b><br/>Customer Call<br/>â”â”â”â”â”â”â”â”â”â”"])
        Start2(["â”â”â”â”â”â”â”â”â”â”<br/><b>Work Intake Source 2:</b><br/>Customer Email<br/>â”â”â”â”â”â”â”â”â”â”"])

        Start1 --> Collect
        Start2 --> Collect

        %% INFORMATION COLLECTION
        Collect["<b>1. Stephen Collects Required Info</b><br/>ğŸ’» Phone/Email<br/>â”â”â”â”â”â”â”â”â”â”<br/><b>Account/Billing:</b><br/>â€¢ Name of account/company<br/>â€¢ Billing address<br/>â€¢ PO number<br/>â€¢ Billing contact<br/><br/><b>Site Information:</b><br/>â€¢ Site location<br/>â€¢ Name of site/project<br/>â€¢ How many PJs needed<br/>â€¢ Onsite contact info<br/><br/><b>Specific Restrictions:</b><br/>â€¢ PPE requirements<br/>â€¢ Gate access<br/>â€¢ Badge requirements<br/>â€¢ Safety videos<br/><br/><b>Specific Requests:</b><br/>â€¢ Hand sanitizer<br/>â€¢ Service frequency per week<br/>â€¢ Specific days per week<br/>â€¢ Placement onsite<br/>â€¢ Start date<br/>â€¢ Estimated end date"]

        %% DATA ENTRY
        Collect --> Entry["<b>2. Enter Order into CRO</b><br/>ğŸ’» CRO Software<br/>â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Enter all customer information<br/>â€¢ Set up service schedule<br/>â€¢ Define placement requirements<br/><br/>âš ï¸ ISSUE:<br/>No email confirmation<br/>collected at this stage"]

        %% ROUTE ASSIGNMENT
        Entry --> Assign["<b>3. Assign to Route</b><br/>ğŸ’» CRO Software<br/>â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Create initial route assignment<br/>â€¢ Add to existing routes<br/><br/>âš ï¸ SYSTEM LIMITATION:<br/>Cannot optimize during<br/>initial route creation"]

        %% ROUTE OPTIMIZATION
        Assign --> Optimize["<b>4. Optimize Route</b><br/>ğŸ’» CRO Software<br/>â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Run route optimization<br/>â€¢ Adjust for efficiency<br/>â€¢ Balance driver workload<br/><br/>âš ï¸ MAJOR BOTTLENECK:<br/>'Hardest part of the job'<br/>Can ONLY optimize AFTER<br/>assignment (not during)<br/>Requires constant re-optimization"]

        %% CONTINUOUS OPTIMIZATION
        Optimize --> ReOptimize{Needs<br/>adjustment?...}
        ReOptimize -->|Yes - Frequently| Optimize
        ReOptimize -->|Ready| Schedule

        %% SCHEDULING
        Schedule["<b>5. Finalize Schedule</b><br/>ğŸ’» CRO Software<br/>â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Set service dates<br/>â€¢ Assign drivers<br/>â€¢ Prepare dispatch info"]

        %% DELIVERY
        Schedule --> Delivery["<b>6. Initial Delivery</b><br/>ğŸ‘· Service Crew<br/>â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Deliver PJ units to site<br/>â€¢ Place according to customer specs<br/>â€¢ Note restrictions (PPE, gate, etc.)<br/><br/>âš ï¸ CRITICAL ISSUE:<br/>No asset tagging/labeling<br/>No numbered identification<br/>Cannot track specific units"]

        %% ONGOING SERVICE
        Delivery --> Service["<b>7. Ongoing Service Visits</b><br/>ğŸ‘· Service Crew<br/>ğŸ’» CRO Software<br/>â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Follow scheduled frequency<br/>â€¢ Service units as assigned<br/>â€¢ Handle customer requests<br/><br/>âš ï¸ MAJOR ISSUE:<br/>'Most of the time we come<br/>onsite the PJs are moved'<br/>Difficult to find exact PJ<br/>No policy on moving toilets"]

        %% MOVED UNITS
        Service --> Moved{PJ units<br/>moved by<br/>customer?...}
        Moved -->|Yes - Usually| FindUnits["<b>Locate Moved Units</b><br/>ğŸ‘· Service Crew<br/>â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Search site for units<br/>â€¢ Contact site contact<br/>â€¢ Spend extra time locating<br/><br/>âš ï¸ INEFFICIENCY:<br/>No tracking system<br/>No documentation of moves<br/>Time-consuming searches"]
        Moved -->|No - Rare| ServiceComplete

        FindUnits --> ServiceComplete["<b>Complete Service</b><br/>ğŸ‘· Service Crew<br/>â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Service all units<br/>â€¢ Restock supplies<br/>â€¢ Note any issues"]

        %% MISSING UNITS
        ServiceComplete --> Missing{PJ<br/>missing?...}
        Missing -->|Yes| Charge["<b>Charge Customer</b><br/>ğŸ’» Billing System<br/>â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Customer allegedly charged<br/><br/>âš ï¸ UNKNOWN:<br/>Cost of new unit unknown<br/>Tracking worth investigating"]
        Missing -->|No| Continue

        Charge --> Continue{Continue<br/>service?...}

        %% CONTINUATION OR END
        Continue -->|Yes| RouteCheck{Route needs<br/>re-optimization?...}
        RouteCheck -->|Yes - Often| Optimize
        RouteCheck -->|No| Service

        Continue -->|Contract ended| End["<b>Remove Units</b><br/>ğŸ‘· Service Crew<br/>â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Pick up all PJ units<br/>â€¢ Close out in CRO<br/>â€¢ Final billing"]

        End --> Final(["â”â”â”â”â”â”â”â”â”â”<br/><b>Job Complete</b><br/>â”â”â”â”â”â”â”â”â”â”"])

    end

    %% ISSUES BOX
    Issues["<b>SYSTEMIC ISSUES IDENTIFIED:</b><br/>â”â”â”â”â”â”â”â”â”â”<br/>1. CRO not used to full potential<br/>2. CRO being misused - unknown causes<br/>3. Firefighting problems vs. solving root causes<br/>4. Need comprehensive training session<br/>5. No asset tracking/tagging system<br/>6. No policy on moving toilets<br/>7. Route optimization workflow constraints<br/>8. No email confirmation at intake"]

    %% Styling - Blue for normal steps
    style Start1 fill:#bbdefb,stroke:#1565c0,stroke-width:3px,color:#000
    style Start2 fill:#bbdefb,stroke:#1565c0,stroke-width:3px,color:#000
    style Collect fill:#bbdefb,stroke:#1565c0,stroke-width:3px,color:#000
    style Schedule fill:#bbdefb,stroke:#1565c0,stroke-width:3px,color:#000
    style ServiceComplete fill:#bbdefb,stroke:#1565c0,stroke-width:3px,color:#000
    style End fill:#bbdefb,stroke:#1565c0,stroke-width:3px,color:#000
    style Final fill:#bbdefb,stroke:#1565c0,stroke-width:3px,color:#000

    %% Styling - Red/Dark red for major issues
    style Entry fill:#660e0e,stroke:#c62828,stroke-width:4px,color:#ffcdd2
    style Assign fill:#660e0e,stroke:#c62828,stroke-width:4px,color:#ffcdd2
    style Optimize fill:#8b0000,stroke:#c62828,stroke-width:5px,color:#ffcdd2
    style Delivery fill:#660e0e,stroke:#c62828,stroke-width:4px,color:#ffcdd2
    style Service fill:#660e0e,stroke:#c62828,stroke-width:4px,color:#ffcdd2
    style FindUnits fill:#8b0000,stroke:#c62828,stroke-width:5px,color:#ffcdd2
    style Charge fill:#660e0e,stroke:#c62828,stroke-width:4px,color:#ffcdd2

    %% Styling - Orange for decisions
    style ReOptimize fill:#ffcc80,stroke:#e65100,stroke-width:3px,color:#000
    style Moved fill:#ffcc80,stroke:#e65100,stroke-width:3px,color:#000
    style Missing fill:#ffcc80,stroke:#e65100,stroke-width:3px,color:#000
    style Continue fill:#ffcc80,stroke:#e65100,stroke-width:3px,color:#000
    style RouteCheck fill:#ffcc80,stroke:#e65100,stroke-width:3px,color:#000

    %% Styling - Issues box
    style Issues fill:#ffe0e0,stroke:#ff6b6b,stroke-width:3px,color:#000
